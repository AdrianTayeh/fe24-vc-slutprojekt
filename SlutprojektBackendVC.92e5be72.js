var t=globalThis,e={},i={},s=t.parcelRequire5556;null==s&&((s=function(t){if(t in e)return e[t].exports;if(t in i){var s=i[t];delete i[t];var n={id:t,exports:{}};return e[t]=n,s.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},t.parcelRequire5556=s),s.register;var n=s("pppFA");function o(t){return Math.abs(Math.floor(t))}function a(t,e){return Math.random()*(e-t)+t}function r(t,e){return Math.floor(a(t,e+1))}function h(t,e,i,s){let n=Math.pow;return Math.sqrt(n(t-i,2)+n(e-s,2))}function c(t,e,i=1){if(t>360||t<0)throw Error(`Expected hue 0-360 range, got \`${t}\``);if(e>100||e<0)throw Error(`Expected lightness 0-100 range, got \`${e}\``);if(i>1||i<0)throw Error(`Expected alpha 0-1 range, got \`${i}\``);return`hsla(${t}, 100%, ${e}%, ${i})`}const l=t=>{if("object"==typeof t&&null!==t){if("function"==typeof Object.getPrototypeOf){let e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return"[object Object]"===Object.prototype.toString.call(t)}return!1},u=["__proto__","constructor","prototype"],d=(...t)=>t.reduce((t,e)=>(Object.keys(e).forEach(i=>{u.includes(i)||(Array.isArray(t[i])&&Array.isArray(e[i])?t[i]=e[i]:l(t[i])&&l(e[i])?t[i]=d(t[i],e[i]):t[i]=e[i])}),t),{});class p{x;y;ctx;hue;friction;gravity;flickering;lineWidth;explosionLength;angle;speed;brightness;coordinates=[];decay;alpha=1;constructor({x:t,y:e,ctx:i,hue:s,decay:n,gravity:o,friction:h,brightness:c,flickering:l,lineWidth:u,explosionLength:d}){for(this.x=t,this.y=e,this.ctx=i,this.hue=s,this.gravity=o,this.friction=h,this.flickering=l,this.lineWidth=u,this.explosionLength=d,this.angle=a(0,2*Math.PI),this.speed=r(1,10),this.brightness=r(c.min,c.max),this.decay=a(n.min,n.max);this.explosionLength--;)this.coordinates.push([t,e])}update(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&t()}draw(){let t=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.lineWidth=this.lineWidth,this.ctx.fillStyle=c(this.hue,this.brightness,this.alpha),this.ctx.moveTo(this.coordinates[t][0],this.coordinates[t][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=c(this.hue,this.flickering?a(0,this.brightness):this.brightness,this.alpha),this.ctx.stroke()}}class m{constructor(t,e){this.options=t,this.canvas=e,this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerMove=this.pointerMove.bind(this)}active=!1;x;y;get mouseOptions(){return this.options.mouse}mount(){this.canvas.addEventListener("pointerdown",this.pointerDown),this.canvas.addEventListener("pointerup",this.pointerUp),this.canvas.addEventListener("pointermove",this.pointerMove)}unmount(){this.canvas.removeEventListener("pointerdown",this.pointerDown),this.canvas.removeEventListener("pointerup",this.pointerUp),this.canvas.removeEventListener("pointermove",this.pointerMove)}usePointer(t,e){let{click:i,move:s}=this.mouseOptions;(i||s)&&(this.x=t.pageX-this.canvas.offsetLeft,this.y=t.pageY-this.canvas.offsetTop,this.active=e)}pointerDown(t){this.usePointer(t,this.mouseOptions.click)}pointerUp(t){this.usePointer(t,!1)}pointerMove(t){this.usePointer(t,this.active)}}class g{hue;rocketsPoint;opacity;acceleration;friction;gravity;particles;explosion;mouse;boundaries;sound;delay;brightness;decay;flickering;intensity;traceLength;traceSpeed;lineWidth;lineStyle;autoresize;constructor(){this.autoresize=!0,this.lineStyle="round",this.flickering=50,this.traceLength=3,this.traceSpeed=10,this.intensity=30,this.explosion=5,this.gravity=1.5,this.opacity=.5,this.particles=50,this.friction=.95,this.acceleration=1.05,this.hue={min:0,max:360},this.rocketsPoint={min:50,max:50},this.lineWidth={explosion:{min:1,max:3},trace:{min:1,max:2}},this.mouse={click:!1,move:!1,max:1},this.delay={min:30,max:60},this.brightness={min:50,max:80},this.decay={min:.015,max:.03},this.sound={enabled:!1,files:["explosion0.mp3","explosion1.mp3","explosion2.mp3"],volume:{min:4,max:8}},this.boundaries={debug:!1,height:0,width:0,x:50,y:50}}update(t){Object.assign(this,d(this,t))}}class x{constructor(t,e){this.options=t,this.render=e}tick=0;rafId=0;fps=60;tolerance=.1;now;mount(){this.now=performance.now();let t=1e3/this.fps,e=i=>{this.rafId=requestAnimationFrame(e);let s=i-this.now;s>=t-this.tolerance&&(this.render(),this.now=i-s%t,this.tick+=s*(this.options.intensity*Math.PI)/1e3)};this.rafId=requestAnimationFrame(e)}unmount(){cancelAnimationFrame(this.rafId)}}class f{constructor(t,e,i){this.options=t,this.updateSize=e,this.container=i}resizer;mount(){if(!this.resizer){var t;let e,i=(t=()=>this.updateSize(),(...i)=>{e&&clearTimeout(e),e=setTimeout(()=>t(...i),100)});this.resizer=new ResizeObserver(i)}this.options.autoresize&&this.resizer.observe(this.container)}unmount(){this.resizer&&this.resizer.unobserve(this.container)}}class y{constructor(t){this.options=t,this.init()}buffers=[];audioContext;onInit=!1;get isEnabled(){return this.options.sound.enabled}get soundOptions(){return this.options.sound}init(){!this.onInit&&this.isEnabled&&(this.onInit=!0,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.loadSounds())}async loadSounds(){for(let t of this.soundOptions.files){let e=await (await fetch(t)).arrayBuffer();this.audioContext.decodeAudioData(e).then(t=>{this.buffers.push(t)}).catch(t=>{throw t})}}play(){if(this.isEnabled&&this.buffers.length){let t=this.audioContext.createBufferSource(),e=this.buffers[r(0,this.buffers.length-1)],i=this.audioContext.createGain();t.buffer=e,i.gain.value=a(this.soundOptions.volume.min/100,this.soundOptions.volume.max/100),i.connect(this.audioContext.destination),t.connect(i),t.start(0)}else this.init()}}class v{x;y;sx;sy;dx;dy;ctx;hue;speed;acceleration;traceLength;totalDistance;angle;brightness;coordinates=[];currentDistance=0;constructor({x:t,y:e,dx:i,dy:s,ctx:n,hue:o,speed:a,traceLength:c,acceleration:l}){for(this.x=t,this.y=e,this.sx=t,this.sy=e,this.dx=i,this.dy=s,this.ctx=n,this.hue=o,this.speed=a,this.traceLength=c,this.acceleration=l,this.totalDistance=h(t,e,i,s),this.angle=Math.atan2(s-e,i-t),this.brightness=r(50,70);this.traceLength--;)this.coordinates.push([t,e])}update(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.acceleration;let e=Math.cos(this.angle)*this.speed,i=Math.sin(this.angle)*this.speed;this.currentDistance=h(this.sx,this.sy,this.x+e,this.y+i),this.currentDistance>=this.totalDistance?t(this.dx,this.dy,this.hue):(this.x+=e,this.y+=i)}draw(){let t=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.moveTo(this.coordinates[t][0],this.coordinates[t][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=c(this.hue,this.brightness),this.ctx.stroke()}}class w{target;container;canvas;ctx;width;height;traces=[];explosions=[];waitStopRaf;running=!1;opts;sound;resize;mouse;raf;constructor(t,e={}){this.target=t,this.container=t,this.opts=new g,this.createCanvas(this.target),this.updateOptions(e),this.sound=new y(this.opts),this.resize=new f(this.opts,this.updateSize.bind(this),this.container),this.mouse=new m(this.opts,this.canvas),this.raf=new x(this.opts,this.render.bind(this))}get isRunning(){return this.running}get version(){return"2.10.8"}get currentOptions(){return this.opts}start(){this.running||(this.canvas.isConnected||this.createCanvas(this.target),this.running=!0,this.resize.mount(),this.mouse.mount(),this.raf.mount())}stop(t=!1){this.running&&(this.running=!1,this.resize.unmount(),this.mouse.unmount(),this.raf.unmount(),this.clear(),t&&this.canvas.remove())}async waitStop(t){if(this.running)return new Promise(e=>{this.waitStopRaf=()=>{this.waitStopRaf&&(requestAnimationFrame(this.waitStopRaf),this.traces.length||this.explosions.length||(this.waitStopRaf=null,this.stop(t),e()))},this.waitStopRaf()})}pause(){this.running=!this.running,this.running?this.raf.mount():this.raf.unmount()}clear(){this.ctx&&(this.traces=[],this.explosions=[],this.ctx.clearRect(0,0,this.width,this.height))}launch(t=1){for(let e=0;e<t;e++)this.createTrace();this.waitStopRaf||(this.start(),this.waitStop())}updateOptions(t){this.opts.update(t)}updateSize({width:t=this.container.clientWidth,height:e=this.container.clientHeight}={}){this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.updateBoundaries({...this.opts.boundaries,width:t,height:e})}updateBoundaries(t){this.updateOptions({boundaries:t})}createCanvas(t){t instanceof HTMLCanvasElement?(t.isConnected||document.body.append(t),this.canvas=t):(this.canvas=document.createElement("canvas"),this.container.append(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.updateSize()}render(){if(!this.ctx||!this.running)return;let{opacity:t,lineStyle:e,lineWidth:i}=this.opts;this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle=`rgba(0, 0, 0, ${t})`,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="lighter",this.ctx.lineCap=e,this.ctx.lineJoin="round",this.ctx.lineWidth=a(i.trace.min,i.trace.max),this.initTrace(),this.drawTrace(),this.drawExplosion()}createTrace(){let{hue:t,rocketsPoint:e,boundaries:i,traceLength:s,traceSpeed:n,acceleration:a,mouse:h}=this.opts;this.traces.push(new v({x:this.width*r(e.min,e.max)/100,y:this.height,dx:this.mouse.x&&h.move||this.mouse.active?this.mouse.x:r(i.x,i.width-2*i.x),dy:this.mouse.y&&h.move||this.mouse.active?this.mouse.y:r(i.y,.5*i.height),ctx:this.ctx,hue:r(t.min,t.max),speed:n,acceleration:a,traceLength:o(s)}))}initTrace(){if(this.waitStopRaf)return;let{delay:t,mouse:e}=this.opts;(this.raf.tick>r(t.min,t.max)||this.mouse.active&&e.max>this.traces.length)&&(this.createTrace(),this.raf.tick=0)}drawTrace(){let t=this.traces.length;for(;t--;)this.traces[t].draw(),this.traces[t].update((e,i,s)=>{this.initExplosion(e,i,s),this.sound.play(),this.traces.splice(t,1)})}initExplosion(t,e,i){let{particles:s,flickering:n,lineWidth:h,explosion:c,brightness:l,friction:u,gravity:d,decay:m}=this.opts,g=o(s);for(;g--;)this.explosions.push(new p({x:t,y:e,ctx:this.ctx,hue:i,friction:u,gravity:d,flickering:r(0,100)<=n,lineWidth:a(h.explosion.min,h.explosion.max),explosionLength:o(c),brightness:l,decay:m}))}drawExplosion(){let t=this.explosions.length;for(;t--;)this.explosions[t].draw(),this.explosions[t].update(()=>{this.explosions.splice(t,1)})}}var b=s("gdelx"),E=s("cOa8X");const M=document.getElementById("messageForm"),S=document.getElementById("userForm"),k=document.getElementById("usernameSelect");async function O(){let t=(0,b.ref)(E.database,"users"),e=await (0,b.get)(t);k.innerHTML="",e.exists()&&Object.entries(e.val()).forEach(([t,e])=>{let i=document.createElement("option");i.value=t,i.textContent=e.username,k.appendChild(i)})}M&&S&&k||console.error("One or more form elements not found"),S.addEventListener("submit",async t=>{t.preventDefault();let e=document.getElementById("newUsername").value,i=document.getElementById("newShadowBanned").checked;if(!e){console.error("Username is required");return}let s=(0,b.ref)(E.database,"users"),n=(0,b.push)(s);await (0,b.set)(n,{username:e,shadowBanned:i}),alert(`User "${e}" created successfully!`),O(),S.reset()}),M.addEventListener("submit",async t=>{t.preventDefault();let e=k.value,i=document.getElementById("messageTxt").value,s=function(){let t=()=>Math.floor(156*Math.random())+100,e=t(),i=t(),s=t();50>Math.abs(e-i)&&(i=(i+100)%256),50>Math.abs(i-s)&&(s=(s+100)%256),50>Math.abs(s-e)&&(e=(e+100)%256);let n=`rgb(${e}, ${i}, ${s})`;return console.log(n),n}();if(i.length>z){alert(`Message is too long! Please keep it under ${z} characters.`);return}if(!e||!i){console.error("Username and message are required");return}let o=(0,b.ref)(E.database,`users/${e}`),a=(await (0,b.get)(o)).val(),r={username:a.username,message:i,color:s,shadowBanned:a.shadowBanned,pinned:!1,x:null,y:null};if(!0===(await (0,n.profanityCheckAndPost)(r.message)).isProfanity){console.error("Message contains profanity"),alert("Message contains profanity");return}try{let t=await (0,n.postMessage)(r);if(t.success){console.log("Message posted successfully:",t.id);let e=document.getElementById("messagesContainer"),i=document.createElement("div");i.id="fireworksContainer",Object.assign(i.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none",zIndex:"9999"}),e.appendChild(i);let s=document.body.classList.contains("dark-mode"),n=new w(i,{autoresize:!0,opacity:s?.8:.5,acceleration:1.05,friction:.98,gravity:1.5,particles:s?200:150,trace:s?5:3,explosion:s?15:10,intensity:s?80:50,flickering:50,lineWidth:{trace:s?3:2,explosion:s?5:4},brightness:{min:s?70:50,max:s?100:80,decay:{min:.015,max:.03}},hue:{min:0,max:360},delay:{min:30,max:60}});n.start(),setTimeout(()=>n.stop(),5e3)}else console.error("Failed to post message:",t.error)}catch(t){console.error("Error posting message:",t)}}),O();const C=document.getElementById("messageTxt"),L=document.getElementById("charCounter"),z=100;C&&L&&(C.addEventListener("input",()=>{let t=z-C.value.length;L.textContent=`${t>=0?t:0} characters remaining`,L.style.color=t<0?"red":"#ffffffcc"}),L.textContent=`${z} characters remaining`);
//# sourceMappingURL=SlutprojektBackendVC.92e5be72.js.map
